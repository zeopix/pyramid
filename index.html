<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
        <script src="js/jquery.js" language="javascript"></script>
        <script>
         $(function(){
                var clickingRow = null;
                var clickingCol = null;
                //selectedBuble coleccion de objetos de la forma obj = array()
                //obj[0] = row
                //objj[1] =minCol
                //obj[2] = maxCol
                var selectedBuble = new Array();
                var val = true;

                $(".stick").click(function(e){
                    //primero pinto todas las filas que tengo


                    if(clickingCol == null && clickingRow == null){
                        clickingRow = $(this).parent().attr("order");

                        clickingCol = $(this).index();
                    }
                    //alert("Col: "+clickingCol)
                    if(selectedBuble.length > 0)
                    {
                        for(i = 0; i <= selectedBuble.length; i++)
                        {
                            var obj = selectedBuble[i];

                            //alert("row: " + obj[0] + " colmin: "+ obj[1] + " colmax; "+ obj[2]);
                            for(i = obj[1]; i<=obj[2]; i++){
                                  $(".row[order="+obj[0]+"]").find(':eq('+i+')').css('background-color',"blue");
                             }

                            if(clickingRow == obj[0])
                            {
                                if (clickingCol <= obj[1] && clickingCol >= obj[2])
                                {
                                    val = false;
                                    clickingCol = null;
                                    clickingRow = null;
                                    alert("ya seleccionado");

                                }
                            }

                        }
                    }else{
                        $(".stick").css('background-color','#AAA');
                    }

                    if(val){
                        
                    $(this).parent().find('.stick').each(function(){
                      $(this).css("background-color","#333");  
                      $(this).click(function(){
                          var currentRow = $(this).parent().attr('order');
                          var currentCol = $(this).index();
                          
                          if(currentRow == clickingRow){
                              

                              //alert(clickingCol + " | "+ currentCol)
                              if(clickingCol > currentCol){
                                  
                                  var min = currentCol;
                                  var max = clickingCol;
                              }else{
                                  var min = clickingCol;
                                  var max = currentCol;
                              }
                              //alert("MIN: " +min + "MAX:" +max);
                              for(i = min; i<=max; i++){
                                  $(".row[order="+currentRow+"]").find(':eq('+i+')').css('background-color',"blue");
                              }
                              /*
                              $(".row[order="+currentRow+"]").find(".stick:gr("+min+"):lt("+max+")").each(function(){
                                    $(this).css("background-color","blue");
                                
                              });
                              */

                              var objBuble = new Array();
                              objBuble[0] = currentRow;
                              objBuble[1] = min;
                              objBuble[2] = max;

                              selectedBuble.push(objBuble);
                              
                              clickingCol = null;
                              clickingRow = null;
                              
                          };
                          
                          
                      }) 
                    });
                    
                    $(this).css('background-color','red');

                    }
                    clicking = "yes";
                    //alert("x: " + e.pageX)
                    val = true;

                
                });
            
        });
    </script>
       <style>
           #container { position: absolute; left: 50%; top: 50%; margin-left: -400px; width: 800px; height: 400px; }
           .stick { width: 20px; height: 20px; background-color: #AAA; float:left; margin: 20px; border-radius:10px;  }
           .row { clear:both; }
           #row_1 { margin-left: 240px;}
           #row_2 { margin-left: 180px;}
           #row_3 { margin-left: 120px;}
           #row_4 { margin-left: 60px;}
       </style>
    </head>
    <body>
        <?php
        // put your code here
        ?>
        <div id="container">
            <div class="row" id="row_1" order="1">
            <div class="stick"></div>
            </div>
            <div class="row" id="row_2" order="2">
            <div class="stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
            </div>
            <div class="row" id="row_3" order="3">
            <div class="stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
            </div>
            <div class="row" id="row_4" order="4">
            <div class="stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
            </div>
            <div class="row" id="row_5" order="5">
            <div class="stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
            </div>
        </div>
    </body>
</html>
